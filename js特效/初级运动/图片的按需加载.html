<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>图片的按需加载</title>
	<style type="text/css">
		div{
			padding: 50px;
			margin: 0 auto;
			width:1300px; 	
		}
		#parent{
			width:1300px; 
			margin: 0;
			padding: 0;
		}
		#parent li{
			border:1px solid black;
			list-style: none;
			float: left;
			width: 400px;
			height: 300px;
			margin: 0 10px 10px 0;
		}
		#parent img{
			width: 400px;
			height: 300px;
		}
	</style>
	<script type="text/javascript">
		window.onload=function(){
			var ul = document.getElementById("parent");
			var img  =ul.getElementsByTagName("img");
			showImag();
			window.onscroll=showImag;
			function showImag(){
			var scrollTops = document.documentElement.scrollTop||document.body.scrollTop;
				for(var i=0;i<img.length;i++){
					if(!img[i].isload&&getTop(img[i])<scrollTops+document.documentElement.clientHeight){
						img[i].src=img[i].getAttribute("_src");
						img[i].isload=true;
					}
				}
			}
		}
		//获取元素的绝对top值
		function getTop(obj){
			var iTop = 0;
			while(obj){
				iTop+= obj.offsetTop;
				obj  = obj.offsetParent;
			}
			return iTop;
		}
	</script>
</head>
<body>
	<div>
	 <ul id="parent">
	 	<li><img _src="../images/huan_1.jpg" src="" ></li>
	 	<li><img _src="../images/huan_2.jpg" src="" ></li>
	 	<li><img _src="../images/huan_3.jpg" src="" ></li>
	 	<li><img _src="../images/huan_4.jpg" src="" ></li>
	 	<li><img _src="../images/huan_5.jpg" src="" ></li>
	 	<li><img _src="../images/scenery_13.jpg" src=""></li>
	 		<li><img _src="../images/huan_1.jpg" src="" ></li>
	 	<li><img _src="../images/huan_2.jpg" src="" ></li>
	 	<li><img _src="../images/huan_3.jpg" src="" ></li>
	 	<li><img _src="../images/huan_4.jpg" src="" ></li>
	 	<li><img _src="../images/huan_5.jpg" src="" ></li>
	 	<li><img _src="../images/scenery_13.jpg" src=""></li>
	 		<li><img _src="../images/huan_1.jpg" src="" ></li>
	 	<li><img _src="../images/huan_2.jpg" src="" ></li>
	 	<li><img _src="../images/huan_3.jpg" src="" ></li>
	 	<li><img _src="../images/huan_4.jpg" src="" ></li>
	 	<li><img _src="../images/huan_5.jpg" src="" ></li>
	 	<li><img _src="../images/scenery_13.jpg" src=""></li>
	 		<li><img _src="../images/huan_1.jpg" src="" ></li>
	 	<li><img _src="../images/huan_2.jpg" src="" ></li>
	 	<li><img _src="../images/huan_3.jpg" src="" ></li>
	 	<li><img _src="../images/huan_4.jpg" src="" ></li>
	 	<li><img _src="../images/huan_5.jpg" src="" ></li>
	 	<li><img _src="../images/scenery_13.jpg" src=""></li>
	 		<li><img _src="../images/huan_1.jpg" src="" ></li>
	 	<li><img _src="../images/huan_2.jpg" src="" ></li>
	 	<li><img _src="../images/huan_3.jpg" src="" ></li>
	 	<li><img _src="../images/huan_4.jpg" src="" ></li>
	 	<li><img _src="../images/huan_5.jpg" src="" ></li>
	 	<li><img _src="../images/scenery_13.jpg" src=""></li>
	 		<li><img _src="../images/huan_1.jpg" src="" ></li>
	 	<li><img _src="../images/huan_2.jpg" src="" ></li>
	 	<li><img _src="../images/huan_3.jpg" src="" ></li>
	 	<li><img _src="../images/huan_4.jpg" src="" ></li>
	 	<li><img _src="../images/huan_5.jpg" src="" ></li>
	 	<li><img _src="../images/scenery_13.jpg" src=""></li>
	 </ul>
	</div>
</body>
</html>